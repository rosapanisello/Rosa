<!DOCTYPE html>

<html lang="ca">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Contacte · Silent Reading Natura</title>
<style>
    
  :root{
    --bg:#fff7f9; --text:#111827; --muted:#6b7280; --brand:#ec4899; --brand2:#f472b6;
    --shadow:0 8px 18px rgba(236,72,153,.10), 0 3px 6px rgba(236,72,153,.08);
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu}
  a{color:inherit;text-decoration:none}
  .container{max-width:1100px;margin:0 auto;padding:24px}
  header{position:sticky;top:0;z-index:10;background:rgba(255,255,255,.85);backdrop-filter:blur(8px);border-bottom:1px solid #fbcfe8}
  .nav{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .brand{font-weight:800;letter-spacing:.2px}
  .tagline{display:block;color:#6b7280;font-weight:600;font-size:.8rem;margin-top:2px}
  .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border-radius:999px;border:1px solid rgba(0,0,0,.06);background:linear-gradient(180deg,rgba(255,255,255,.9),rgba(255,255,255,.75));box-shadow:var(--shadow)}
  .btn.primary{border-color:transparent;background:linear-gradient(180deg,var(--brand2),var(--brand));color:#fff}
  .grid{display:grid;gap:24px}
  footer{padding:32px 0;color:#6b7280;border-top:1px solid #fbcfe8}
  /* Smaller feature cards */
  .features{grid-template-columns:repeat(2,1fr)}
  .feature{background:#fff;border:1px solid #fbcfe8;border-radius:16px;padding:14px;box-shadow:var(--shadow)}
  .feature img{width:100%;border-radius:12px;margin-bottom:6px}
  .feature h3{margin:.2rem 0 .4rem;font-size:1.15rem}
  .feature p, .feature li{font-size:.98rem}
  /* Forms */
  form{display:grid;gap:14px}
  label{font-weight:600}
  input, textarea, select{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #ddd;background:#fff;font-size:1rem}
  input:focus,textarea:focus,select:focus{border-color:var(--brand);box-shadow:0 0 0 4px rgba(236,72,153,.22);outline:none}
  textarea{min-height:120px;resize:vertical}
  @media (max-width:900px){ .features{grid-template-columns:1fr} }

  </style>
</head>
<body>
<header>
<div class="container nav">
<a aria-label="Inici" class="logo" href="index.html">
<span class="brand">Silent Reading Natura</span>
<small class="tagline">By Rosa Panisello</small>
</a>
<nav style="display:flex;gap:8px;flex-wrap:wrap">
<a class="btn" href="inscripcio.html">Inscripció</a>
<a class="btn" href="activitat.html">Properes activitats</a>
</nav>
</div>
</header>
<main class="container" style="padding-top:24px">
<div class="card"><div class="pad">
<h1 style="margin:0 0 6px;color:#ec4899;text-transform:uppercase">Silent Reading Natura</h1>
<p class="hero-sub" style="font-weight:700;margin:0 0 8px">Contacte</p>
<form id="formContacte" method="POST" action="https://formspree.io/f/xnngqbdb">
<label for="nom">Nom</label>
<input id="nom" name="Nom" placeholder="Escriu el teu nom" required=""/>
<label for="email">Correu electrònic</label>
<input id="email" name="Email" placeholder="tu@exemple.com" required="" type="email"/>
<label for="missatge">Missatge</label>
<textarea id="missatge" name="Missatge" placeholder="Explica’ns què necessites…" required=""></textarea>
<button class="btn primary" type="submit">Enviar</button>



  <input type="hidden" name="_next" value="https://rosapanisello.github.io/Rosa/gracies.html">

  <p class="form-status" aria-live="polite"></p>
</form>
<div style="margin-top:16px">
<a class="btn" href="index.html">← Torna a l’inici</a>
</div>
</div></div>
</main>
<footer>
<div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap">
<small>© 2025 Silent Reading Natura By Rosa Panisello · Tots els drets reservats</small>
<small>Instagram: <span>@rosapanisello_lletres</span></small>
</div>
</footer>
<!-- Formspree AJAX with fallback: if request fails, submit natively -->
<script>
(function(){
  function enhance(formId, thanksUrl){
    var form = document.getElementById(formId);
    if(!form) return;

    // Ensure action/method
    form.setAttribute('action', 'https://formspree.io/f/xnngqbdb');
    form.setAttribute('method', 'POST');

    async function handleSubmit(ev){
      ev.preventDefault();
      var fd = new FormData(form);
      var statusEl = form.querySelector('.form-status');

      // Timeout controller (10s)
      var controller = new AbortController();
      var timer = setTimeout(function(){ controller.abort(); }, 10000);

      try{
        var res = await fetch(form.action, {
          method: form.method,
          body: fd,
          headers: { 'Accept': 'application/json' },
          signal: controller.signal
        });
        clearTimeout(timer);
        if(res.ok){
          window.location.href = thanksUrl;
          return;
        }else{
          try{
            var data = await res.json();
            if(statusEl) statusEl.textContent = (data && data.errors && data.errors[0] && data.errors[0].message) || 'Error enviant el formulari.';
          }catch(_){
            if(statusEl) statusEl.textContent = 'Error enviant el formulari.';
          }
        }
      }catch(e){
        if(statusEl) statusEl.textContent = 'No s’ha pogut contactar amb el servidor. S’intenta la via segura...';
      }

      // Graceful fallback: remove listener and let the browser do a native POST
      form.removeEventListener('submit', handleSubmit);
      // Ensure _next exists for native success redirect
      if(!form.querySelector('input[name="_next"]')){
        var nx = document.createElement('input');
        nx.type = 'hidden';
        nx.name = '_next';
        nx.value = thanksUrl;
        form.appendChild(nx);
      }
      form.submit();
    }

    form.addEventListener('submit', handleSubmit);
  }

  enhance('formContacte', 'https://rosapanisello.github.io/Rosa/gracies.html');
  enhance('formInscripcio', 'https://rosapanisello.github.io/Rosa/gracies-inscripcio.html');
})();
</script>
<!-- visit-tracker (GAS) start -->
<script>
(function(){
  try{
    if (window.__vt_sent__) return; window.__vt_sent__=true;
    var d = new URLSearchParams();
    d.append('path', location.pathname + location.search);
    d.append('referrer', document.referrer || '');
    var p = new URLSearchParams(location.search);
    ['utm_source','utm_medium','utm_campaign','utm_term','utm_content'].forEach(function(k){
      var v=p.get(k); if(v) d.append(k,v);
    });
    var ENDPOINT = 'https://script.google.com/macros/s/AKfycbzgXPKGWT-osxq4XHcKCjwKgyRG4dgSWu2kuGJTdAcu8N_aU07-FIJJay9bdN40eSQ/exec'; // TODO: reemplaza por tu URL de Apps Script que termina en /exec
    if(navigator.sendBeacon){
      var b=new Blob([d.toString()],{type:'application/x-www-form-urlencoded'});
      navigator.sendBeacon(ENDPOINT,b);
    } else {
      fetch(ENDPOINT,{method:'POST',body:d,keepalive:true,headers:{'Content-Type':'application/x-www-form-urlencoded'}});
    }
  }catch(_{}){}
})();
</script>
<!-- visit-tracker (GAS) end -->


<!-- visible-visit-counter (JSONP) start -->
<style>
  .cv-counter-badge{
    position:fixed; right:16px; bottom:16px; z-index:9999;
    background:rgba(255,255,255,.92); backdrop-filter:saturate(180%) blur(8px);
    border:1px solid rgba(0,0,0,.08); border-radius:999px; padding:6px 12px;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    font-size:12px; color:#374151; box-shadow:0 2px 10px rgba(0,0,0,.08);
  }
  @media (max-width: 640px){ .cv-counter-badge{ font-size:11px; right:12px; bottom:12px; } }
</style>
<div class="cv-counter-badge" id="cvCounter" aria-live="polite" title="Visites totals">Visites: —</div>
<script>
(function(){
  // Define endpoint locally
  var ENDPOINT = "https://script.google.com/macros/s/AKfycbzgXPKGWT-osxq4XHcKCjwKgyRG4dgSWu2kuGJTdAcu8N_aU07-FIJJay9bdN40eSQ/exec";
  // 10-minute throttle; ?force=1 overrides
  try {
    var KEY = 'cv_last_hit_ts';
    var now = Date.now();
    var last = parseInt(localStorage.getItem(KEY) || '0', 10);
    var TEN_MIN = 10 * 60 * 1000;
    var qs = location.search ? location.search.substring(1) : '';
    var params = new URLSearchParams(qs);
    var force = (params.has('force') && params.get('force') !== '0');
    var shouldSend = force || (!last || (now - last) > TEN_MIN);

    if (shouldSend) {
      if (force) console.log('[cv] forcing hit (ignore 10min throttle)');
      localStorage.setItem(KEY, String(now));
      var p = new URLSearchParams();
      p.append('hit','1');
      p.append('path', location.pathname + location.search);
      p.append('referrer', document.referrer || '');
      var utms = ['utm_source','utm_medium','utm_campaign','utm_term','utm_content'];
      for (var i=0;i<utms.length;i++) {
        var k = utms[i];
        var v = params.get(k);
        if (v) p.append(k, v);
      }
      var img = new Image(1,1);
      img.referrerPolicy = 'no-referrer-when-downgrade';
      var url = ENDPOINT + '?' + p.toString() + '&ts=' + Date.now();
      console.log('[cv] sending hit:', url);
      img.src = url;
    } else {
      console.log('[cv] throttled (10min window). Last:', last, 'Now:', now);
    }
  } catch(e) { console.warn('[cv] error sending hit', e); }

  // Read total via JSONP with cache-buster
  try {
    var cb = 'CV_CB_' + Math.random().toString().slice(2);
    window[cb] = function(data){
      try {
        var t = (data && typeof data.total !== 'undefined') ? data.total : null;
        if (t !== null) document.getElementById('cvCounter').textContent = 'Visites: ' + (t.toLocaleString ? t.toLocaleString() : t);
      } catch(_e){}
      try { delete window[cb]; } catch(_d){}
    };
    var s = document.createElement('script');
    s.src = ENDPOINT + '?summary=1&callback=' + cb + '&ts=' + Date.now();
    document.head.appendChild(s);
  } catch(e) { console.warn('[cv] error loading total', e); }
})();
</script>
<!-- visible-visit-counter (JSONP) end -->

</body>
</html>